import{S as te,a as ae}from"./navigation-DXWtV-45.js";import{N as le}from"./navigation-DQLiCwt-.js";import{_ as se,a as oe,r as f,P as ne,a3 as re,a0 as ie,aA as de,e as I,d as V,o as b,w as t,f as e,ar as d,aB as S,m as k,a7 as z,y as P,s as n,av as me,l as R,I as s,j as E,t as i,at as y,h,au as D,aC as ue,g as H,F as q,q as $,v as ce,z as fe,k as ve,A as pe}from"./index-CYZvQ5mV.js";import{v as _e}from"./venueService-Dairq2Ot.js";import{s as ge}from"./socialService-BcIbf0L-.js";import{s as be}from"./socialParticipantService-BxZ9fkMp.js";import{d as A}from"./dayjs.min-CFWPjdno.js";import{r as he}from"./zh-tw-vtWARsfI.js";import{V as T,a as m}from"./VRow-BHCpDIVQ.js";import{V as ye}from"./VList-DFcty8tt.js";import{V as we}from"./VContainer-BqFL-tdS.js";import"./_commonjsHelpers-gnU0ypJ3.js";const xe=""+new URL("passing-DswJmcCd.png",import.meta.url).href,Ve={class:"d-flex justify-space-between"},ke={class:"font-weight-bold mt-n1 mb-1",style:{"font-size":"2rem"}},Pe={class:"d-flex justify-space-between mt-5"},De={class:"font-weight-bold mt-6",style:{"font-size":"1.3rem"}},Te={class:"font-weight-bold"},Ce={class:"d-flex justify-space-between"},Ie={class:"venueName"},Se={__name:"index",setup(ze){A.extend(he),A.locale("zh-tw");const G=[le];oe();let C=f(""),N=f(0),j=f(0);const w=f([]),J=f("@/assets/images/gabi hitting.jpg.jpg"),K=ne("Transactions"),Q=re(()=>K.value==="Transactions"?[{id:1,title:"出席",value:90,color:"#ffd000"},{id:2,title:"缺席",value:10,color:"#f1f1f1",pattern:"url(#pattern-0)"}]:[{id:1,title:"出席",value:90,color:"#353D42"},{id:2,title:"缺席",value:10,color:"#f1f1f1"}]),W=f(),B=f([new Date]),M=f([]),F=["blue","indigo","deep-purple","cyan","green","orange","grey darken-1"],L=["Meeting","Holiday","PTO","Travel","Event","Birthday","Conference","Party"],r=f({});function X({start:o,end:a}){const u=[],v=o,p=a,l=(p.getTime()-v.getTime())/864e5,c=g(l,l+20);for(let x=0;x<c;x++){const _=g(0,3)===0,U=g(v.getTime(),p.getTime()),O=new Date(U-U%9e5),Z=g(2,_?288:8)*9e5,ee=new Date(O.getTime()+Z);u.push({title:L[g(0,L.length-1)],start:O,end:ee,color:F[g(0,F.length-1)],allDay:!_})}M.value=u}function g(o,a){return Math.floor((a-o+1)*Math.random())+o}const Y=async()=>{try{const{data:o}=await pe.profile();if(!o||!o.user){console.log("API 回傳資料格式不正確或無使用者資料",o);return}r.value=o.user,C.value=A(r.value.createdAt).fromNow();const{data:a}=await ge.getAll();if(a&&a.socials){const p=a.socials.filter(l=>{var c;return((c=l.host)==null?void 0:c._id)===r.value._id});N.value=p.length}else console.log("API 回傳活動資料格式不正確",a);const{data:u}=await be.getMyParticipations();u&&u.myParticipations?j.value=u.myParticipations.length:console.log("API 回傳參與活動資料格式不正確",u);const{data:v}=await _e.getAvailable();if(v&&v.venues&&r.value.favoriteVenues){const p=new Set(r.value.favoriteVenues);w.value=v.venues.filter(l=>p.has(l._id)).map(l=>{const c=l.images&&l.images.length>0?l.images[0]:J.value;return{...l,imageUrl:c}})}}catch(o){console.error("使用者資料取得失敗:",o)}};return ie(()=>{Y();const o=de();X({start:o.startOfDay(o.startOfMonth(new Date)),end:o.endOfDay(o.endOfMonth(new Date))})}),(o,a)=>{const u=I("v-calendar"),v=I("v-pie"),p=I("router-link");return b(),V(we,{class:"bg-dark"},{default:t(()=>[e(d,{class:"bg-light pt-10 mt-1 pb-5",style:{border:"2px solid black"}},{default:t(()=>[e(T,null,{default:t(()=>[e(m,{cols:"4",md:"6"},{default:t(()=>[e(S,{text:"回首頁",location:"bottom"},{activator:t(({props:l})=>[e(k,z({variant:"outlined",class:"ml-7 btn-hover",rounded:"0",to:"/",size:"40"},l),{default:t(()=>[e(P,null,{default:t(()=>a[1]||(a[1]=[n("mdi-home",-1)])),_:1,__:[1]})]),_:2},1040)]),_:1})]),_:1}),e(m,{cols:"8",md:"6",class:"d-flex"},{default:t(()=>[e(me,{"prepend-inner-icon":"mdi-magnify",density:"compact",placeholder:"請輸入關鍵字","hide-details":"",style:{"background-color":"#f1f1f1",border:"2px solid black"},class:"mr-md-10 mr-3"}),e(k,{class:"mr-md-2 mr-1 btn-hover",variant:"outlined",rounded:"0",to:"/",size:"40"},{default:t(()=>[e(P,null,{default:t(()=>a[2]||(a[2]=[n("mdi-bell",-1)])),_:1,__:[2]})]),_:1}),e(R,{rounded:"0",image:xe,style:{border:"2px solid black"},class:"mr-7 btn-hover"})]),_:1})]),_:1}),e(T,null,{default:t(()=>[e(m,{cols:"11",md:"7"},{default:t(()=>[a[7]||(a[7]=s("h1",{class:"card-title mb-3 ml-7"},"球員檔案 Player Information",-1)),e(d,{class:"pa-5 card-memberPage mb-5 ml-7",color:"#fdd000"},{default:t(()=>[e(T,null,{default:t(()=>[e(m,{cols:"4"},{default:t(()=>[e(E,{style:{border:"2px solid black"},src:r.value.avatar,height:"320",width:"250",class:"mt-1",cover:""},null,8,["src"])]),_:1}),e(m,{cols:"8",class:"ml-n5"},{default:t(()=>[e(m,{cols:"12"},{default:t(()=>[s("div",Ve,[s("h1",ke,i(r.value.name),1),e(S,{text:"編輯球員檔案",location:"bottom"},{activator:t(({props:l})=>[e(k,z(l,{to:"/member/profile",rounded:"0",size:"35",variant:"outlined",class:"btn-hover mt-1"}),{default:t(()=>[e(P,{icon:"mdi-pencil"})]),_:2},1040)]),_:1})]),s("h3",null,i(r.value.gender)+"．"+i(r.value.skillLevel)+"．",1),s("h3",null,i(r.value.email),1),s("div",Pe,[s("div",null,[e(d,{class:"card-border mr-n4 text-center",width:"130",rounded:"0"},{default:t(()=>[e(y,{class:"font-weight-bold text-h5"},{default:t(()=>[n(i(h(j)),1)]),_:1}),e(D,null,{default:t(()=>a[3]||(a[3]=[n("打過的 play ",-1)])),_:1,__:[3]})]),_:1})]),s("div",null,[e(d,{class:"card-border mr-n4 text-center",width:"130",rounded:"0"},{default:t(()=>[e(y,{class:"font-weight-bold text-h5"},{default:t(()=>[n(i(h(N)),1)]),_:1}),e(D,null,{default:t(()=>a[4]||(a[4]=[n("揪過的 play ",-1)])),_:1,__:[4]})]),_:1})]),s("div",null,[e(d,{class:"card-border mr-n4 text-center",width:"130",rounded:"0"},{default:t(()=>[e(y,{class:"font-weight-bold text-h5"},{default:t(()=>[n(i(h(C)),1)]),_:1}),e(D,null,{default:t(()=>a[5]||(a[5]=[n("加入揪排咖 ",-1)])),_:1,__:[5]})]),_:1})]),s("div",null,[e(d,{class:"card-border text-center",width:"130",rounded:"0"},{default:t(()=>[e(y,{class:"font-weight-bold text-h5"},{default:t(()=>[n(i(h(C)),1)]),_:1}),e(D,null,{default:t(()=>a[6]||(a[6]=[n("加入揪排咖 ",-1)])),_:1,__:[6]})]),_:1})])]),s("div",null,[s("h1",De,i(r.value.quote),1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1,__:[7]}),e(m,{cols:"11",md:"5"},{default:t(()=>[a[8]||(a[8]=s("h1",{class:"card-title mt-1 mb-2 ml-7 ml-md-0"},"排球行事曆 Events Calender",-1)),e(d,{class:"pa-4 card-memberPage mr-md-7 ml-7 ml-md-0",height:"368",style:{"overflow-y":"scroll"}},{default:t(()=>[e(T,{class:"fill-height"},{default:t(()=>[e(m,null,{default:t(()=>[e(ue,{height:"350"},{default:t(()=>[e(u,{ref_key:"calendar",ref:W,modelValue:B.value,"onUpdate:modelValue":a[0]||(a[0]=l=>B.value=l),events:M.value,color:"#353D42",type:"month"},null,8,["modelValue","events"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1,__:[8]}),e(m,{cols:"12",md:"4"},{default:t(()=>[a[10]||(a[10]=s("div",{class:"card-title mb-2 ml-7"},"出席統計 Presence Rate",-1)),e(d,{class:"card-memberPage mr-10 mr-md-7 ml-7 mb-7",height:"225"},{default:t(()=>[e(v,{items:Q.value,legend:{position:o.$vuetify.display.mdAndUp?"right":"bottom"},tooltip:{subtitleFormat:"[value]%"},class:"justify-center mt-5","inner-cut":"70","item-key":"id",rounded:"2",size:"180",animation:"","hide-slice":"",reveal:""},{center:t(()=>a[9]||(a[9]=[s("div",{class:"text-center"},[s("div",{class:"card-title text-h5"},"出席率"),s("div",{class:"opacity-70 text-h4 mt-1 mb-n1"},"90%")],-1)])),legend:t(({items:l,toggle:c,isActive:x})=>[e(ye,{class:"py-0 mb-n5 mb-md-0 bg-transparent",density:"compact",width:"150"},{default:t(()=>[(b(!0),H(q,null,$(l,_=>(b(),V(ce,{key:_.key,class:fe(["my-1",{"opacity-40":!x(_)}]),title:_.title,rounded:"xl",link:""},{prepend:t(()=>[e(R,{color:_.color,size:16},null,8,["color"])]),append:t(()=>[s("div",Te,i(_.value)+"%",1)]),_:2},1032,["class","title"]))),128))]),_:2},1024)]),_:1},8,["items","legend"])]),_:1})]),_:1,__:[10]}),e(m,{cols:"11",md:"8",class:"ml-md-n7 ml-7 mr-7 mb-8 mb-md-0"},{default:t(()=>[s("div",Ce,[a[12]||(a[12]=s("h1",{class:"card-title mb-2"},"收藏的球場 Favorite Courts",-1)),e(S,{text:"編輯收藏",location:"bottom"},{activator:t(({props:l})=>[e(k,z({class:"mr-md-2 mr-1 mt-1 btn-hover",variant:"outlined",rounded:"0",to:"/member/favorites",size:"35"},l),{default:t(()=>[e(P,null,{default:t(()=>a[11]||(a[11]=[n("mdi-pencil",-1)])),_:1,__:[11]})]),_:2},1040)]),_:1})]),!w.value||w.value.length===0?(b(),V(d,{key:0,height:"225",class:"card-memberPage"},{default:t(()=>[e(y,{style:{"font-size":"1.5rem","line-height":"200px"},class:"text-center"},{default:t(()=>[a[14]||(a[14]=n(" 你還沒有收藏任何球場喔~快到 ",-1)),e(p,{to:"/venueList"},{default:t(()=>a[13]||(a[13]=[s("span",{style:{"text-decoration":"underline"}},"球場列表",-1)])),_:1,__:[13]}),a[15]||(a[15]=n(" 搜尋喜歡的球場吧！ ",-1))]),_:1,__:[14,15]})]),_:1})):ve("",!0),e(h(te),{slidesPerView:"4",navigation:!0,modules:G,"space-between":220,class:"mySwiper"},{default:t(()=>[(b(!0),H(q,null,$(w.value,(l,c)=>(b(),V(h(ae),{key:c},{default:t(()=>[e(d,{class:"card-memberPage card-favoriteVenues",width:"300",height:"220",to:`/venueSingle/${l._id}`},{default:t(()=>[e(E,{src:l.imageUrl,class:"fill-height img-favoriteVenues",cover:""},null,8,["src"]),s("h2",Ie,i(l.name),1)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},qe=se(Se,[["__scopeId","data-v-e1c101a5"]]);export{qe as default};
