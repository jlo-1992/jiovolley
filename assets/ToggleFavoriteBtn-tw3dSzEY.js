import{b as x,g as w}from"./VSelect-BBF_QDbq.js";import{D as z,C as D,a2 as R,ce as U,r as F,bK as A,H as L,bL as T,bM as k,h as t,a7 as C,aU as q,aW as N,bO as j,_ as M,i as O,c as y,u as $,b as E,aw as H,f as K,j as W,g as G,B as J,p as _,w as u,ar as Q,at as X,v as h,x as Y,ay as Z,az as ee,F as se,e as ae}from"./index-DzXIfeuh.js";/* empty css                                                                          */const te=D({...j(),...N(w(),["inline"])},"VCheckbox"),ue=z()({name:"VCheckbox",inheritAttrs:!1,props:te(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,c){let{attrs:i,slots:n}=c;const l=R(e,"modelValue"),{isFocused:p,focus:f,blur:d}=U(e),m=F(),o=A();return L(()=>{const[b,g]=T(i),V=k.filterProps(e),r=x.filterProps(e);return t(k,C({ref:m,class:["v-checkbox",e.class]},b,V,{modelValue:l.value,"onUpdate:modelValue":s=>l.value=s,id:e.id||`checkbox-${o}`,focused:p.value,style:e.style}),{...n,default:s=>{let{id:a,messagesId:v,isDisabled:P,isReadonly:I,isValid:S}=s;return t(x,C(r,{id:a.value,"aria-describedby":v.value,disabled:P.value,readonly:I.value},g,{error:S.value===!1,modelValue:l.value,"onUpdate:modelValue":B=>l.value=B,onFocus:f,onBlur:d}),n)}})}),q({},m)}}),oe={__name:"ToggleFavoriteBtn",props:{icon:{type:String,required:!0},venue:{type:Object,required:!0},size:{type:[String,Number],default:void 0},class:{type:String,default:void 0}},setup(e){const c=O(),i=y(()=>n.favoriteVenues.includes(d.venue._id)),n=$(),l=y(()=>n.isLoggedIn),p=E(),f=H(),d=e,m=async()=>{var r,s;try{const a=d.venue._id;i.value?n.removeFavoriteVenue(a):n.addFavoriteVenue(a),await ae.updateFavoriteVenues({venueId:a}),c({text:i.value?"收藏成功！":"已移除收藏！",snackbarProps:{color:"green"}})}catch(a){console.error(a),c({text:((s=(r=a==null?void 0:a.response)==null?void 0:r.data)==null?void 0:s.message)||"收藏失敗，請稍後再試！",snackbarProps:{color:"red"}})}},o=F({open:!1,message:"請先登入才能收藏球場喔！"}),b=()=>{o.value.open=!1},g=()=>{o.value.open=!0},V=()=>{o.value.open=!1,p.push({path:"/logInSingUp",query:{redirect:f.fullPath}})};return(r,s)=>{const a=K("v-icon-btn");return G(),W(se,null,[t(_,{icon:e.icon,onClick:s[0]||(s[0]=v=>l.value?m(e.venue):g()),class:J(["btn-heart",e.class]),variant:"text",size:e.size},null,8,["icon","size","class"]),t(ee,{modelValue:o.value.open,"onUpdate:modelValue":s[1]||(s[1]=v=>o.value.open=v),persistent:"",width:"360"},{default:u(()=>[t(Q,{class:"card-dialog"},{default:u(()=>[t(X,{class:"text-center mt-10"},{default:u(()=>[h(Y(o.value.message),1)]),_:1}),t(a,{icon:"mdi-close",onClick:b,class:"btn-close"}),t(Z,null,{default:u(()=>[t(_,{class:"btn mx-auto mt-3 mb-5",onClick:V},{default:u(()=>s[2]||(s[2]=[h("前往登入",-1)])),_:1,__:[2]})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},ce=M(oe,[["__scopeId","data-v-90b9c6e2"]]);export{ue as V,ce as _};
