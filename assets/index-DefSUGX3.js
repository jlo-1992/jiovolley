import{_ as te}from"./passing-CouDye6I.js";import{e as ae,c as se,m as w,S as le,a as ne}from"./navigation-CDpIVlSO.js";import{_ as ie,a as oe,r as x,O as re,a2 as de,$ as ce,az as me,e as Q,d as M,o as j,w as s,f as a,ar as E,k as U,y as F,q as b,au as ue,aA as J,H as d,j as K,t as h,as as O,h as T,at as z,aB as fe,g as W,F as X,p as Y,v as pe,z as ve,A as ge}from"./index-Dm7nCjjk.js";import{v as he}from"./venueService-D_4xG924.js";import{s as _e}from"./socialService-BxJeXCKv.js";import{s as be}from"./socialParticipantService-BoToaA_g.js";import{d as H}from"./dayjs.min-CFWPjdno.js";import{r as ye}from"./zh-tw-vtWARsfI.js";import{V as q,a as y}from"./VRow-Dt6IMYhC.js";import{V as we}from"./VList-CFRBHqqf.js";import{V as xe}from"./VContainer-B5u-03KV.js";import"./_commonjsHelpers-gnU0ypJ3.js";const Ee=""+new URL("ryujji-CQ5gNjDD.jpg",import.meta.url).href;function Ce(D,e,_,p){return D.params.createElements&&Object.keys(p).forEach(u=>{if(!_[u]&&_.auto===!0){let g=ae(D.el,`.${p[u]}`)[0];g||(g=se("div",p[u]),g.className=p[u],D.el.append(g)),_[u]=g,e[u]=g}}),_}function Ve(D){let{swiper:e,extendParams:_,on:p,emit:u}=D;_({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function g(t){let l;return t&&typeof t=="string"&&e.isElement&&(l=e.el.querySelector(t)||e.hostEl.querySelector(t),l)?l:(t&&(typeof t=="string"&&(l=[...document.querySelectorAll(t)]),e.params.uniqueNavElements&&typeof t=="string"&&l&&l.length>1&&e.el.querySelectorAll(t).length===1?l=e.el.querySelector(t):l&&l.length===1&&(l=l[0])),t&&!l?t:l)}function P(t,l){const o=e.params.navigation;t=w(t),t.forEach(r=>{r&&(r.classList[l?"add":"remove"](...o.disabledClass.split(" ")),r.tagName==="BUTTON"&&(r.disabled=l),e.params.watchOverflow&&e.enabled&&r.classList[e.isLocked?"add":"remove"](o.lockClass))})}function k(){const{nextEl:t,prevEl:l}=e.navigation;if(e.params.loop){P(l,!1),P(t,!1);return}P(l,e.isBeginning&&!e.params.rewind),P(t,e.isEnd&&!e.params.rewind)}function A(t){t.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),u("navigationPrev"))}function I(t){t.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),u("navigationNext"))}function L(){const t=e.params.navigation;if(e.params.navigation=Ce(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(t.nextEl||t.prevEl))return;let l=g(t.nextEl),o=g(t.prevEl);Object.assign(e.navigation,{nextEl:l,prevEl:o}),l=w(l),o=w(o);const r=(i,n)=>{i&&i.addEventListener("click",n==="next"?I:A),!e.enabled&&i&&i.classList.add(...t.lockClass.split(" "))};l.forEach(i=>r(i,"next")),o.forEach(i=>r(i,"prev"))}function S(){let{nextEl:t,prevEl:l}=e.navigation;t=w(t),l=w(l);const o=(r,i)=>{r.removeEventListener("click",i==="next"?I:A),r.classList.remove(...e.params.navigation.disabledClass.split(" "))};t.forEach(r=>o(r,"next")),l.forEach(r=>o(r,"prev"))}p("init",()=>{e.params.navigation.enabled===!1?N():(L(),k())}),p("toEdge fromEdge lock unlock",()=>{k()}),p("destroy",()=>{S()}),p("enable disable",()=>{let{nextEl:t,prevEl:l}=e.navigation;if(t=w(t),l=w(l),e.enabled){k();return}[...t,...l].filter(o=>!!o).forEach(o=>o.classList.add(e.params.navigation.lockClass))}),p("click",(t,l)=>{let{nextEl:o,prevEl:r}=e.navigation;o=w(o),r=w(r);const i=l.target;let n=r.includes(i)||o.includes(i);if(e.isElement&&!n){const c=l.path||l.composedPath&&l.composedPath();c&&(n=c.find(m=>o.includes(m)||r.includes(m)))}if(e.params.navigation.hideOnClick&&!n){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===i||e.pagination.el.contains(i)))return;let c;o.length?c=o[0].classList.contains(e.params.navigation.hiddenClass):r.length&&(c=r[0].classList.contains(e.params.navigation.hiddenClass)),u(c===!0?"navigationShow":"navigationHide"),[...o,...r].filter(m=>!!m).forEach(m=>m.classList.toggle(e.params.navigation.hiddenClass))}});const B=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),L(),k()},N=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),S()};Object.assign(e.navigation,{enable:B,disable:N,update:k,init:L,destroy:S})}const ke={class:"d-flex justify-space-between"},De={class:"font-weight-bold mt-n1 mb-1",style:{"font-size":"2rem"}},Pe={class:"d-flex justify-space-between mt-5"},Le={class:"font-weight-bold mt-6",style:{"font-size":"1.3rem"}},Se={class:"font-weight-bold"},Te={class:"venueName"},Ne={__name:"index",setup(D){H.extend(ye),H.locale("zh-tw");const e=[Ve];oe();let _=x(""),p=x(0),u=x(0);const g=x([]),P=x("@/assets/images/gabi hitting.jpg.jpg"),k=re("Transactions"),A=de(()=>k.value==="Transactions"?[{id:1,title:"出席",value:90,color:"#ffd000"},{id:2,title:"缺席",value:10,color:"#f1f1f1",pattern:"url(#pattern-0)"}]:[{id:1,title:"出席",value:90,color:"#353D42"},{id:2,title:"缺席",value:10,color:"#f1f1f1"}]),I=x(),L=x([new Date]),S=x([]),B=["blue","indigo","deep-purple","cyan","green","orange","grey darken-1"],N=["Meeting","Holiday","PTO","Travel","Event","Birthday","Conference","Party"],t=x({});function l({start:i,end:n}){const c=[],m=i,v=n,f=(v.getTime()-m.getTime())/864e5,C=o(f,f+20);for(let V=0;V<C;V++){const R=o(0,3)===0,$=o(m.getTime(),v.getTime()),G=new Date($-$%9e5),Z=o(2,R?288:8)*9e5,ee=new Date(G.getTime()+Z);c.push({title:N[o(0,N.length-1)],start:G,end:ee,color:B[o(0,B.length-1)],allDay:!R})}S.value=c}function o(i,n){return Math.floor((n-i+1)*Math.random())+i}const r=async()=>{try{const{data:i}=await ge.profile();if(!i||!i.user){console.log("API 回傳資料格式不正確或無使用者資料",i);return}t.value=i.user,_.value=H(t.value.createdAt).fromNow();const{data:n}=await _e.getAll();if(n&&n.socials){const v=n.socials.filter(f=>{var C;return((C=f.host)==null?void 0:C._id)===t.value._id});p.value=v.length}else console.log("API 回傳活動資料格式不正確",n);const{data:c}=await be.getMyParticipations();c&&c.myParticipations?u.value=c.myParticipations.length:console.log("API 回傳參與活動資料格式不正確",c);const{data:m}=await he.getAvailable();if(m&&m.venues&&t.value.favoriteVenues){const v=new Set(t.value.favoriteVenues);g.value=m.venues.filter(f=>v.has(f._id)).map(f=>{const C=f.images&&f.images.length>0?f.images[0]:P.value;return{...f,imageUrl:C}})}}catch(i){console.error("使用者資料取得失敗:",i)}};return ce(()=>{r();const i=me();l({start:i.startOfDay(i.startOfMonth(new Date)),end:i.endOfDay(i.endOfMonth(new Date))})}),(i,n)=>{const c=Q("v-calendar"),m=Q("v-pie");return j(),M(xe,{class:"bg-dark"},{default:s(()=>[a(E,{class:"bg-light pt-10 mt-1",style:{border:"2px solid black"}},{default:s(()=>[a(q,null,{default:s(()=>[a(y,{cols:"4",md:"6"},{default:s(()=>[a(U,{variant:"outlined",class:"ml-7 btn-hover",rounded:"0",to:"/",size:"40"},{default:s(()=>[a(F,null,{default:s(()=>n[1]||(n[1]=[b("mdi-home",-1)])),_:1,__:[1]})]),_:1})]),_:1}),a(y,{cols:"8",md:"6",class:"d-flex"},{default:s(()=>[a(ue,{"prepend-inner-icon":"mdi-magnify",density:"compact",placeholder:"請輸入關鍵字","hide-details":"",style:{"background-color":"#f1f1f1",border:"2px solid black"},class:"mr-md-10 mr-3"}),a(U,{class:"mr-md-2 mr-1 btn-hover",variant:"outlined",rounded:"0",to:"/",size:"40"},{default:s(()=>[a(F,null,{default:s(()=>n[2]||(n[2]=[b("mdi-bell",-1)])),_:1,__:[2]})]),_:1}),a(J,{rounded:"0",image:te,style:{border:"2px solid black"},class:"mr-7 btn-hover"})]),_:1})]),_:1}),a(q,null,{default:s(()=>[a(y,{cols:"11",md:"7"},{default:s(()=>[n[7]||(n[7]=d("h1",{class:"card-title mb-3 ml-7"},"球員檔案 Player Information",-1)),a(E,{class:"pa-5 card-memberPage mb-5 ml-7",color:"#fdd000"},{default:s(()=>[a(q,null,{default:s(()=>[a(y,{cols:"4"},{default:s(()=>[a(K,{style:{border:"2px solid black"},src:Ee,height:"320",width:"250",class:"mt-1",cover:""})]),_:1}),a(y,{cols:"8",class:"ml-n5"},{default:s(()=>[a(y,{cols:"12"},{default:s(()=>[d("div",ke,[d("h1",De,h(t.value.name),1),a(U,{to:"/member/profile",rounded:"0",size:"35",variant:"outlined",class:"btn-hover mt-1"},{default:s(()=>[a(F,{icon:"mdi-pencil"})]),_:1})]),d("h3",null,h(t.value.gender)+"．"+h(t.value.skillLevel)+"．",1),d("h3",null,h(t.value.email),1),d("div",Pe,[d("div",null,[a(E,{class:"card-border mr-n4",width:"130",rounded:"0"},{default:s(()=>[a(O,{class:"font-weight-bold text-h5"},{default:s(()=>[b(h(T(u)),1)]),_:1}),a(z,null,{default:s(()=>n[3]||(n[3]=[b("打過的 play ",-1)])),_:1,__:[3]})]),_:1})]),d("div",null,[a(E,{class:"card-border mr-n4",width:"130",rounded:"0"},{default:s(()=>[a(O,{class:"font-weight-bold text-h5"},{default:s(()=>[b(h(T(p)),1)]),_:1}),a(z,null,{default:s(()=>n[4]||(n[4]=[b("揪過的 play ",-1)])),_:1,__:[4]})]),_:1})]),d("div",null,[a(E,{class:"card-border mr-n4",width:"130",rounded:"0"},{default:s(()=>[a(O,{class:"font-weight-bold text-h5"},{default:s(()=>[b(h(T(_)),1)]),_:1}),a(z,null,{default:s(()=>n[5]||(n[5]=[b("加入揪排咖 ",-1)])),_:1,__:[5]})]),_:1})]),d("div",null,[a(E,{class:"card-border",width:"130",rounded:"0"},{default:s(()=>[a(O,{class:"font-weight-bold text-h5"},{default:s(()=>[b(h(T(_)),1)]),_:1}),a(z,null,{default:s(()=>n[6]||(n[6]=[b("加入揪排咖 ",-1)])),_:1,__:[6]})]),_:1})])]),d("div",null,[d("h1",Le,h(t.value.quote),1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1,__:[7]}),a(y,{cols:"11",md:"5"},{default:s(()=>[n[8]||(n[8]=d("h1",{class:"card-title mt-1 mb-2 ml-7 ml-md-0"},"排球行事曆 Events Calender",-1)),a(E,{class:"pa-4 card-memberPage mr-md-7 ml-7 ml-md-0",height:"368",style:{"overflow-y":"scroll"}},{default:s(()=>[a(q,{class:"fill-height"},{default:s(()=>[a(y,null,{default:s(()=>[a(fe,{height:"350"},{default:s(()=>[a(c,{ref_key:"calendar",ref:I,modelValue:L.value,"onUpdate:modelValue":n[0]||(n[0]=v=>L.value=v),events:S.value,color:"#353D42",type:"month"},null,8,["modelValue","events"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1,__:[8]}),a(y,{cols:"12",md:"4"},{default:s(()=>[n[10]||(n[10]=d("div",{class:"card-title mb-2 ml-7"},"出席統計 Presence Rate",-1)),a(E,{class:"card-memberPage mr-10 mr-md-7 ml-7 mb-7",height:"225"},{default:s(()=>[a(m,{items:A.value,legend:{position:i.$vuetify.display.mdAndUp?"right":"bottom"},tooltip:{subtitleFormat:"[value]%"},class:"justify-center mt-5","inner-cut":"70","item-key":"id",rounded:"2",size:"180",animation:"","hide-slice":"",reveal:""},{center:s(()=>n[9]||(n[9]=[d("div",{class:"text-center"},[d("div",{class:"card-title text-h5"},"出席率"),d("div",{class:"opacity-70 text-h4 mt-1 mb-n1"},"90%")],-1)])),legend:s(({items:v,toggle:f,isActive:C})=>[a(we,{class:"py-0 mb-n5 mb-md-0 bg-transparent",density:"compact",width:"150"},{default:s(()=>[(j(!0),W(X,null,Y(v,V=>(j(),M(pe,{key:V.key,class:ve(["my-1",{"opacity-40":!C(V)}]),title:V.title,rounded:"xl",link:""},{prepend:s(()=>[a(J,{color:V.color,size:16},null,8,["color"])]),append:s(()=>[d("div",Se,h(V.value)+"%",1)]),_:2},1032,["class","title"]))),128))]),_:2},1024)]),_:1},8,["items","legend"])]),_:1})]),_:1,__:[10]}),a(y,{cols:"11",md:"8",class:"ml-md-n7 ml-7 mr-7 mb-8 mb-md-0"},{default:s(()=>[n[11]||(n[11]=d("h1",{class:"card-title mb-2"},"收藏的球場 Favorite Courts",-1)),a(T(le),{slidesPerView:"4",navigation:!0,modules:e,"space-between":220,class:"mySwiper"},{default:s(()=>[(j(!0),W(X,null,Y(g.value,(v,f)=>(j(),M(T(ne),{key:f},{default:s(()=>[a(E,{class:"card-memberPage card-favoriteVenues",width:"300",height:"220"},{default:s(()=>[a(K,{src:v.imageUrl,class:"fill-height img-favoriteVenues",cover:""},null,8,["src"]),d("h2",Te,h(v.name),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1,__:[11]})]),_:1})]),_:1})]),_:1})}}},$e=ie(Ne,[["__scopeId","data-v-ac3cfe26"]]);export{$e as default};
