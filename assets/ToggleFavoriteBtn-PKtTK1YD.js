import{b as k,g as R}from"./VSelect-C8o7NfQM.js";import{C as S,B as w,a1 as D,cd as T,r as P,bJ as U,G as L,bK as q,bL as _,f as t,a6 as x,aT as N,aV as $,bN as j,_ as E,i as G,c as C,u as J,b as K,ai as M,e as O,g as z,o as H,k as h,w as c,ad as Q,af as W,q as F,t as X,al as Y,am as Z,F as ee,A as ae}from"./index-avKRDGQf.js";const se=w({...j(),...$(R(),["inline"])},"VCheckbox"),le=S()({name:"VCheckbox",inheritAttrs:!1,props:se(),emits:{"update:modelValue":a=>!0,"update:focused":a=>!0},setup(a,i){let{attrs:r,slots:n}=i;const l=D(a,"modelValue"),{isFocused:v,focus:f,blur:d}=T(a),p=P(),o=U();return L(()=>{const[b,V]=q(r),g=_.filterProps(a),u=k.filterProps(a);return t(_,x({ref:p,class:["v-checkbox",a.class]},b,g,{modelValue:l.value,"onUpdate:modelValue":e=>l.value=e,id:a.id||`checkbox-${o}`,focused:v.value,style:a.style}),{...n,default:e=>{let{id:s,messagesId:m,isDisabled:y,isReadonly:I,isValid:B}=e;return t(k,x(u,{id:s.value,"aria-describedby":m.value,disabled:y.value,readonly:I.value},V,{error:B.value===!1,modelValue:l.value,"onUpdate:modelValue":A=>l.value=A,onFocus:f,onBlur:d}),n)}})}),N({},p)}}),te={__name:"ToggleFavoriteBtn",props:{venue:{type:Object,required:!0}},setup(a){const i=G(),r=C(()=>n.favoriteVenues.includes(d.venue._id)),n=J(),l=C(()=>n.isLoggedIn),v=K(),f=M(),d=a,p=async()=>{var u,e;try{const s=d.venue._id;r.value?n.removeFavoriteVenue(s):n.addFavoriteVenue(s),await ae.updateFavoriteVenues({venueId:s}),i({text:r.value?"收藏成功！":"已移除收藏！",snackbarProps:{color:"green"}})}catch(s){console.error(s),i({text:((e=(u=s==null?void 0:s.response)==null?void 0:u.data)==null?void 0:e.message)||"收藏失敗，請稍後再試！",snackbarProps:{color:"red"}})}},o=P({open:!1,message:"請先登入才能收藏球場喔！"}),b=()=>{o.value.open=!1},V=()=>{o.value.open=!0},g=()=>{o.value.open=!1,v.push({path:"/logInSingUp",query:{redirect:f.fullPath}})};return(u,e)=>{const s=O("v-icon-btn");return H(),z(ee,null,[t(h,{icon:r.value?"mdi-heart":"mdi-heart-outline",onClick:e[0]||(e[0]=m=>l.value?p(a.venue):V()),class:"btn-heart",variant:"plain"},null,8,["icon"]),t(Z,{modelValue:o.value.open,"onUpdate:modelValue":e[1]||(e[1]=m=>o.value.open=m),persistent:"",width:"360"},{default:c(()=>[t(Q,{class:"card-dialog"},{default:c(()=>[t(W,{class:"text-center mt-10"},{default:c(()=>[F(X(o.value.message),1)]),_:1}),t(s,{icon:"mdi-close",onClick:b,class:"btn-close"}),t(Y,null,{default:c(()=>[t(h,{class:"btn mx-auto mt-3 mb-5",onClick:g},{default:c(()=>e[2]||(e[2]=[F("前往登入",-1)])),_:1,__:[2]})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},re=E(te,[["__scopeId","data-v-bfb6fc50"]]);export{le as V,re as _};
