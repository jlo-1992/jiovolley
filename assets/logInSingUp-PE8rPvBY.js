import{_ as te,i as ne,b as ie,aw as de,r as g,u as ue,c as me,f as H,g as ce,k as R,h as S,j as s,e as t,F as B,K as a,m as p,x as n,a9 as O,ax as z,as as V,s as _,l as o,av as v,q as j,ar as pe,at as ge,au as ve,ay as fe,az as be,d as ye}from"./index-C9grEgEQ.js";import{u as T,c as Z,a as f,b as xe,d as b,V as J}from"./vee-validate-D6H-ZaN0.js";import{v as X}from"./index-Dcj7LDNL.js";import{b as C}from"./route-block-B_A1xBdJ.js";import{V as K,a as F}from"./VRow-DOXSkd0N.js";import{V as he}from"./VContainer-CMULnfHW.js";import"./_commonjsHelpers-gnU0ypJ3.js";const Q=""+new URL("logo-portrait-dark-BA9GD_Xj.png",import.meta.url).href,W=""+new URL("google-logo-yDFiyRQH.png",import.meta.url).href,Y="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='320'%20height='320'%20viewBox='0%200%20320%20320'%3e%3cdefs%3e%3cstyle%3e.cls-1{fill:%2306c755;}.cls-2{fill:%23fff;}%3c/style%3e%3c/defs%3e%3cg%20id='Layer_2'%20data-name='Layer%202'%3e%3cg%20id='LINE_LOGO'%20data-name='LINE%20LOGO'%3e%3crect%20class='cls-1'%20width='320'%20height='320'%20rx='72.14'/%3e%3cpath%20class='cls-2'%20d='M266.66,144.92c0-47.74-47.86-86.58-106.69-86.58S53.28,97.18,53.28,144.92c0,42.8,38,78.65,89.22,85.42,3.48.75,8.21,2.29,9.4,5.26,1.08,2.7.71,6.93.35,9.65,0,0-1.25,7.53-1.52,9.13-.47,2.7-2.15,10.55,9.24,5.76s61.44-36.18,83.82-61.95h0C259.25,181.24,266.66,164,266.66,144.92Z'/%3e%3cpath%20class='cls-1'%20d='M231.16,172.49h-30a2,2,0,0,1-2-2v0h0V123.94h0v0a2,2,0,0,1,2-2h30a2,2,0,0,1,2,2v7.57a2,2,0,0,1-2,2H210.79v7.85h20.37a2,2,0,0,1,2,2V151a2,2,0,0,1-2,2H210.79v7.86h20.37a2,2,0,0,1,2,2v7.56A2,2,0,0,1,231.16,172.49Z'/%3e%3cpath%20class='cls-1'%20d='M120.29,172.49a2,2,0,0,0,2-2v-7.56a2,2,0,0,0-2-2H99.92v-37a2,2,0,0,0-2-2H90.32a2,2,0,0,0-2,2v46.53h0v0a2,2,0,0,0,2,2h30Z'/%3e%3crect%20class='cls-1'%20x='128.73'%20y='121.85'%20width='11.64'%20height='50.64'%20rx='2.04'/%3e%3cpath%20class='cls-1'%20d='M189.84,121.85h-7.56a2,2,0,0,0-2,2v27.66l-21.3-28.77a1.2,1.2,0,0,0-.17-.21v0l-.12-.12,0,0-.11-.09-.06,0-.11-.08-.06,0-.11-.06-.07,0-.11,0-.07,0-.12,0-.08,0-.12,0h-.08l-.11,0h-7.71a2,2,0,0,0-2,2v46.56a2,2,0,0,0,2,2h7.57a2,2,0,0,0,2-2V142.81l21.33,28.8a2,2,0,0,0,.52.52h0l.12.08.06,0,.1.05.1,0,.07,0,.14,0h0a2.42,2.42,0,0,0,.54.07h7.52a2,2,0,0,0,2-2V123.89A2,2,0,0,0,189.84,121.85Z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",we=""+new URL("ran-BJzpnlJA.jpg",import.meta.url).href,ke=""+new URL("kim-BoXGxAmB.jpg",import.meta.url).href,Ve={class:"d-flex justify-center mt-5"},_e={class:"d-flex align-center mt-3 mb-5"},Se={class:"text-center mt-13"},Ce={class:"d-flex justify-center"},Le={class:"d-flex align-center mt-3 mb-5"},Ee={class:"text-center mt-8"},ee={__name:"mbLogIn",setup(se){const i=ne(),y=ie(),L=de(),x=g(!0),h=ue(),w=g({open:!1,message:"請先登入才能報名打 play 喔！"}),le=()=>{w.value.open=!1},G=()=>{w.value.open=!0},E=T({validationSchema:Z({email:f().required("電子郵件必填").test("isEmail","請輸入有效的電子郵件地址",r=>!r||X.isEmail(r)),password:f().required("密碼必填").min(8,"密碼長度須至少 8 個字元").max(20,"密碼長度最多 20 個字元"),confirmPassword:f().required("確認密碼必填").oneOf([xe("password")],"確認密碼和密碼必須相同")})}),I=b("email"),q=b("password"),P=b("confirmPassword"),U=T({validationSchema:Z({email:f().required("電子郵件必填").test("isEmail","請輸入有效的電子郵件地址",r=>!r||X.isEmail(r)),password:f().required("密碼必填").min(8,"密碼長度須至少 8 個字元").max(20,"密碼長度最多 20 個字元")})}),D=b("email"),M=b("password"),c=g(!1),d=g(!1),k=g(!0),ae=me(()=>x.value?we:ke),N=()=>{x.value=!x.value},oe=E.handleSubmit(async r=>{var e,m;try{await H.create({email:r.email,password:r.password}),i({text:"註冊成功！請填寫個人資料，以利使用網站功能~",snackbarProps:{color:"green"}}),y.push(L.query.redirect||"/")}catch(l){console.error(l),i({text:((m=(e=l==null?void 0:l.response)==null?void 0:e.data)==null?void 0:m.message)||"註冊失敗，請稍後再試！",snackbarProps:{color:"red"}})}}),re=U.handleSubmit(async r=>{var e,m;try{const{data:l}=await H.login({email:r.email,password:r.password});h.login(l.user),console.log("準備導轉，redirect 參數為:",L.query.redirect),!h.name||!h.gender||!h.skillLevel?(y.push("member/profile"),i({text:"登入成功！請填寫個人資料，以利使用網站功能~",snackbarProps:{color:"green"}})):(y.push(L.query.redirect||"/"),i({text:"登入成功！",snackbarProps:{color:"green"}}))}catch(l){console.error(l),i({text:((m=(e=l==null?void 0:l.response)==null?void 0:e.data)==null?void 0:m.message)||"登入失敗，請稍後再試！",snackbarProps:{color:"red"}})}}),$=async()=>{try{console.log("準備重定向到 LINE 登入頁面"),window.location.href="https://jiovolley-backend.onrender.com/user/auth/line"}catch(r){console.error("LINE 登入錯誤:",r),i({text:"無法連接 LINE 登入服務，請稍後再試",snackbarProps:{color:"red"}})}},A=async()=>{try{console.log("準備重定向到 Google 登入頁面"),window.location.href="https://jiovolley-backend.onrender.com/user/auth/google"}catch(r){console.error("Google 登入錯誤:",r),i({text:"無法連接 Google 登入服務，請稍後再試",snackbarProps:{color:"red"}})}},u={required:r=>!!r||"此欄位為必填.",min:r=>r.length>=8||"至少 8 個字",emailMatch:()=>"使用者的帳號與密碼不符"};return(r,e)=>{const m=ce("v-icon-btn");return S(),R(B,null,[s(he,{fluid:"",class:"bg-dark"},{default:t(()=>[s(K,{"no-gutters":"",class:"justify-center align-center"},{default:t(()=>[s(F,{cols:"12",md:"7",class:"bg-light"},{default:t(()=>[s(K,{"no-gutters":""},{default:t(()=>[s(F,{cols:"12",md:"6",class:"form-section"},{default:t(()=>[x.value?(S(),R(B,{key:0},[s(p,{style:{margin:"auto"},src:Q,width:"130"}),e[14]||(e[14]=a("h2",{class:"text-center slogan"},[n(" For Every Skill, Every Set, "),a("br"),n(" Every Player. ")],-1)),a("div",Ve,[s(p,{class:"ml-11",src:W,onClick:A,"max-width":"80",style:{cursor:"pointer"}}),s(p,{class:"ml-16",src:Y,onClick:$,"max-width":"80",style:{cursor:"pointer"}}),O(s(m,{icon:"mdi-information-outline",class:"mt-15",variant:"text",onClick:G},null,512),[[z]])]),a("div",_e,[s(V,{class:"flex-grow-1",thickness:"3",color:"#353D42",opacity:"20"}),e[9]||(e[9]=a("div",{class:"d-flex mx-4"},[a("span",{style:{"font-weight":"900","font-size":"1.2rem"},class:"mx-1"},"或")],-1)),s(V,{class:"flex-grow-1",thickness:"3",color:"#353D42",opacity:"20"})]),s(J,{disabled:o(U).isSubmitting.value,onSubmit:_(o(re),["prevent"])},{default:t(()=>[s(v,{modelValue:o(D).value.value,"onUpdate:modelValue":e[0]||(e[0]=l=>o(D).value.value=l),"error-messages":o(D).errorMessage.value,readonly:c.value,rules:[u.required],class:"neubrutalism",label:"Email",clearable:"","hide-details":""},null,8,["modelValue","error-messages","readonly","rules"]),s(v,{modelValue:o(M).value.value,"onUpdate:modelValue":e[1]||(e[1]=l=>o(M).value.value=l),"error-messages":o(M).errorMessage.value,"append-inner-icon":d.value?"mdi-eye":"mdi-eye-off",rules:[u.required,u.min],type:d.value?"text":"password",hint:"密碼長度至少 8 個字元",label:"密碼",maxlength:"20",minlength:"4",counter:"","onClick:appendInner":e[2]||(e[2]=l=>d.value=!d.value),readonly:c.value,"hide-details":"",class:"neubrutalism mb-10"},null,8,["modelValue","error-messages","append-inner-icon","rules","type","readonly"]),s(j,{disabled:o(U).isSubmitting.value,loading:c.value,color:"#353D42",type:"submit",variant:"elevated",block:"",class:"btn",height:"45"},{default:t(()=>e[10]||(e[10]=[n(" 登入 ",-1)])),_:1,__:[10]},8,["disabled","loading"]),a("div",Se,[e[11]||(e[11]=a("span",{class:"toggle"}," 忘記密碼？",-1)),e[12]||(e[12]=a("br",null,null,-1)),e[13]||(e[13]=n(" 第一次來揪排咖嗎？ ",-1)),a("span",{onClick:_(N,["prevent"]),class:"toggle"}," 註冊新帳號")])]),_:1},8,["disabled","onSubmit"])],64)):(S(),R(B,{key:1},[s(p,{style:{margin:"auto"},src:Q,width:"130"}),e[18]||(e[18]=a("h2",{class:"text-center slogan"},[n(" For Every Skill, Every Set, "),a("br"),n(" Every Player. ")],-1)),a("div",Ce,[s(p,{class:"ml-11",src:W,onClick:A,"max-width":"80",style:{cursor:"pointer"}}),s(p,{class:"ml-16",src:Y,"max-width":"80",onClick:$,style:{cursor:"pointer"}}),O(s(m,{icon:"mdi-information-outline",class:"mt-15",variant:"text",onClick:G},null,512),[[z]])]),a("div",Le,[s(V,{class:"flex-grow-1",thickness:"3",color:"#353D42",opacity:"20"}),e[15]||(e[15]=a("div",{class:"d-flex mx-4"},[a("span",{style:{"font-weight":"900","font-size":"1.2rem"},class:"mx-1"},"或")],-1)),s(V,{class:"flex-grow-1",thickness:"3",color:"#353D42",opacity:"20"})]),s(J,{disabled:o(E).isSubmitting.value,onSubmit:_(o(oe),["prevent"])},{default:t(()=>[s(v,{modelValue:o(I).value.value,"onUpdate:modelValue":e[3]||(e[3]=l=>o(I).value.value=l),"error-messages":o(I).errorMessage.value,readonly:c.value,rules:[u.required],class:"neubrutalism",label:"Email",clearable:"","hide-details":""},null,8,["modelValue","error-messages","readonly","rules"]),s(v,{modelValue:o(q).value.value,"onUpdate:modelValue":e[4]||(e[4]=l=>o(q).value.value=l),"error-messages":o(q).errorMessage.value,"append-inner-icon":d.value?"mdi-eye":"mdi-eye-off",rules:[u.required,u.min],type:d.value?"text":"password",hint:"密碼長度至少 8 個字元",label:"密碼",maxlength:"20",minlength:"4",counter:"","onClick:appendInner":e[5]||(e[5]=l=>d.value=!d.value),readonly:c.value,"hide-details":"",class:"neubrutalism"},null,8,["modelValue","error-messages","append-inner-icon","rules","type","readonly"]),s(v,{modelValue:o(P).value.value,"onUpdate:modelValue":e[6]||(e[6]=l=>o(P).value.value=l),"error-messages":o(P).errorMessage.value,"append-inner-icon":k.value?"mdi-eye":"mdi-eye-off",rules:[u.required,u.min],type:k.value?"text":"password",hint:"確認密碼和密碼必須相同",label:"確認密碼",maxlength:"20",minlength:"4",counter:"","onClick:appendInner":e[7]||(e[7]=l=>k.value=!k.value),readonly:c.value,"hide-details":"",class:"neubrutalism mb-8"},null,8,["modelValue","error-messages","append-inner-icon","rules","type","readonly"]),s(j,{disabled:o(E).isSubmitting.value,loading:c.value,color:"#353D42",type:"submit",variant:"elevated",block:"",class:"btn",height:"45"},{default:t(()=>e[16]||(e[16]=[n(" 註冊 ",-1)])),_:1,__:[16]},8,["disabled","loading"]),a("div",Ee,[e[17]||(e[17]=n(" 已經是揪排咖的一員了嗎？ ",-1)),a("span",{class:"toggle",onClick:_(N,["prevent"])}," 按我登入")])]),_:1},8,["disabled","onSubmit"])],64))]),_:1}),s(F,{md:"6",class:"d-none d-md-block pa-8 image-section"},{default:t(()=>[s(p,{id:"ran",src:ae.value,rounded:"xl"},null,8,["src"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(be,{modelValue:w.value.open,"onUpdate:modelValue":e[8]||(e[8]=l=>w.value.open=l),persistent:"",width:"300"},{default:t(()=>[s(pe,{class:"card"},{default:t(()=>[s(ge,{class:"text-center mt-3"},{default:t(()=>e[19]||(e[19]=[n("登入說明",-1)])),_:1,__:[19]}),s(ve,null,{default:t(()=>e[20]||(e[20]=[a("b",null,"LINE 登入：",-1),a("br",null,null,-1),n("官方帳號會把報名的場次資訊推送給你，絕對不怕遺漏任何一場！ ",-1),a("br",null,null,-1),a("br",null,null,-1),a("b",null,"Google 登入：",-1),n(),a("br",null,null,-1),n("場次提醒將會寄到你的 Google 信箱，重要訊息一封不漏！ ",-1)])),_:1,__:[20]}),s(fe,null,{default:t(()=>[s(j,{class:"btn-dialog mb-2 mr-2",onClick:le},{default:t(()=>e[21]||(e[21]=[n("了解",-1)])),_:1,__:[21]})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}};typeof C=="function"&&C(ee);const Ie=te(ee,[["__scopeId","data-v-32d4df9b"]]),qe={__name:"logInSingUp",setup(se){return(i,y)=>(S(),ye(Ie))}};typeof C=="function"&&C(qe);export{qe as default};
