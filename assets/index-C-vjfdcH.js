import{_ as te}from"./ryujji-Dg__2X3a.js";import{S as ae,a as le}from"./navigation-BgJvFIpa.js";import{N as se}from"./navigation-WL--TjGO.js";import{_ as oe,a as ne,r as f,O as re,a2 as ie,$ as de,az as me,e as z,d as V,o as b,w as t,f as e,aq as d,aA as I,k,a6 as S,y as D,q as n,au as ue,aB as R,H as s,j as E,t as r,as as y,h,at as P,aC as ce,g as H,F as $,p as q,v as fe,z as ve,m as pe,A as _e}from"./index-DK6HwtVU.js";import{v as ge}from"./venueService-DxW3Okiw.js";import{s as be}from"./socialService-ByUSwzp2.js";import{s as he}from"./socialParticipantService-BuaxfGPS.js";import{d as A}from"./dayjs.min-CFWPjdno.js";import{r as ye}from"./zh-tw-vtWARsfI.js";import{V as T,a as m}from"./VRow-BR8SAERn.js";import{V as we}from"./VList-B4zmGCkJ.js";import{V as xe}from"./VContainer-CaSd6b1z.js";import"./_commonjsHelpers-gnU0ypJ3.js";const Ve=""+new URL("passing-DswJmcCd.png",import.meta.url).href,ke={class:"d-flex justify-space-between"},De={class:"font-weight-bold mt-n1 mb-1",style:{"font-size":"2rem"}},Pe={class:"d-flex justify-space-between mt-5"},Te={class:"font-weight-bold mt-6",style:{"font-size":"1.3rem"}},Ce={class:"font-weight-bold"},ze={class:"d-flex justify-space-between"},Ie={class:"venueName"},Se={__name:"index",setup(Ae){A.extend(ye),A.locale("zh-tw");const G=[se];ne();let C=f(""),N=f(0),j=f(0);const w=f([]),J=f("@/assets/images/gabi hitting.jpg.jpg"),K=re("Transactions"),Q=ie(()=>K.value==="Transactions"?[{id:1,title:"出席",value:90,color:"#ffd000"},{id:2,title:"缺席",value:10,color:"#f1f1f1",pattern:"url(#pattern-0)"}]:[{id:1,title:"出席",value:90,color:"#353D42"},{id:2,title:"缺席",value:10,color:"#f1f1f1"}]),W=f(),B=f([new Date]),M=f([]),F=["blue","indigo","deep-purple","cyan","green","orange","grey darken-1"],L=["Meeting","Holiday","PTO","Travel","Event","Birthday","Conference","Party"],i=f({});function X({start:o,end:a}){const u=[],v=o,p=a,l=(p.getTime()-v.getTime())/864e5,c=g(l,l+20);for(let x=0;x<c;x++){const _=g(0,3)===0,O=g(v.getTime(),p.getTime()),U=new Date(O-O%9e5),Z=g(2,_?288:8)*9e5,ee=new Date(U.getTime()+Z);u.push({title:L[g(0,L.length-1)],start:U,end:ee,color:F[g(0,F.length-1)],allDay:!_})}M.value=u}function g(o,a){return Math.floor((a-o+1)*Math.random())+o}const Y=async()=>{try{const{data:o}=await _e.profile();if(!o||!o.user){console.log("API 回傳資料格式不正確或無使用者資料",o);return}i.value=o.user,C.value=A(i.value.createdAt).fromNow();const{data:a}=await be.getAll();if(a&&a.socials){const p=a.socials.filter(l=>{var c;return((c=l.host)==null?void 0:c._id)===i.value._id});N.value=p.length}else console.log("API 回傳活動資料格式不正確",a);const{data:u}=await he.getMyParticipations();u&&u.myParticipations?j.value=u.myParticipations.length:console.log("API 回傳參與活動資料格式不正確",u);const{data:v}=await ge.getAvailable();if(v&&v.venues&&i.value.favoriteVenues){const p=new Set(i.value.favoriteVenues);w.value=v.venues.filter(l=>p.has(l._id)).map(l=>{const c=l.images&&l.images.length>0?l.images[0]:J.value;return{...l,imageUrl:c}})}}catch(o){console.error("使用者資料取得失敗:",o)}};return de(()=>{Y();const o=me();X({start:o.startOfDay(o.startOfMonth(new Date)),end:o.endOfDay(o.endOfMonth(new Date))})}),(o,a)=>{const u=z("v-calendar"),v=z("v-pie"),p=z("router-link");return b(),V(xe,{class:"bg-dark"},{default:t(()=>[e(d,{class:"bg-light pt-10 mt-1 pb-5",style:{border:"2px solid black"}},{default:t(()=>[e(T,null,{default:t(()=>[e(m,{cols:"4",md:"6"},{default:t(()=>[e(I,{text:"回首頁",location:"bottom"},{activator:t(({props:l})=>[e(k,S({variant:"outlined",class:"ml-7 btn-hover",rounded:"0",to:"/",size:"40"},l),{default:t(()=>[e(D,null,{default:t(()=>a[1]||(a[1]=[n("mdi-home",-1)])),_:1,__:[1]})]),_:2},1040)]),_:1})]),_:1}),e(m,{cols:"8",md:"6",class:"d-flex"},{default:t(()=>[e(ue,{"prepend-inner-icon":"mdi-magnify",density:"compact",placeholder:"請輸入關鍵字","hide-details":"",style:{"background-color":"#f1f1f1",border:"2px solid black"},class:"mr-md-10 mr-3"}),e(k,{class:"mr-md-2 mr-1 btn-hover",variant:"outlined",rounded:"0",to:"/",size:"40"},{default:t(()=>[e(D,null,{default:t(()=>a[2]||(a[2]=[n("mdi-bell",-1)])),_:1,__:[2]})]),_:1}),e(R,{rounded:"0",image:Ve,style:{border:"2px solid black"},class:"mr-7 btn-hover"})]),_:1})]),_:1}),e(T,null,{default:t(()=>[e(m,{cols:"11",md:"7"},{default:t(()=>[a[7]||(a[7]=s("h1",{class:"card-title mb-3 ml-7"},"球員檔案 Player Information",-1)),e(d,{class:"pa-5 card-memberPage mb-5 ml-7",color:"#fdd000"},{default:t(()=>[e(T,null,{default:t(()=>[e(m,{cols:"4"},{default:t(()=>[e(E,{style:{border:"2px solid black"},src:te,height:"320",width:"250",class:"mt-1",cover:""})]),_:1}),e(m,{cols:"8",class:"ml-n5"},{default:t(()=>[e(m,{cols:"12"},{default:t(()=>[s("div",ke,[s("h1",De,r(i.value.name),1),e(I,{text:"編輯球員檔案",location:"bottom"},{activator:t(({props:l})=>[e(k,S(l,{to:"/member/profile",rounded:"0",size:"35",variant:"outlined",class:"btn-hover mt-1"}),{default:t(()=>[e(D,{icon:"mdi-pencil"})]),_:2},1040)]),_:1})]),s("h3",null,r(i.value.gender)+"．"+r(i.value.skillLevel)+"．",1),s("h3",null,r(i.value.email),1),s("div",Pe,[s("div",null,[e(d,{class:"card-border mr-n4 text-center",width:"130",rounded:"0"},{default:t(()=>[e(y,{class:"font-weight-bold text-h5"},{default:t(()=>[n(r(h(j)),1)]),_:1}),e(P,null,{default:t(()=>a[3]||(a[3]=[n("打過的 play ",-1)])),_:1,__:[3]})]),_:1})]),s("div",null,[e(d,{class:"card-border mr-n4 text-center",width:"130",rounded:"0"},{default:t(()=>[e(y,{class:"font-weight-bold text-h5"},{default:t(()=>[n(r(h(N)),1)]),_:1}),e(P,null,{default:t(()=>a[4]||(a[4]=[n("揪過的 play ",-1)])),_:1,__:[4]})]),_:1})]),s("div",null,[e(d,{class:"card-border mr-n4 text-center",width:"130",rounded:"0"},{default:t(()=>[e(y,{class:"font-weight-bold text-h5"},{default:t(()=>[n(r(h(C)),1)]),_:1}),e(P,null,{default:t(()=>a[5]||(a[5]=[n("加入揪排咖 ",-1)])),_:1,__:[5]})]),_:1})]),s("div",null,[e(d,{class:"card-border text-center",width:"130",rounded:"0"},{default:t(()=>[e(y,{class:"font-weight-bold text-h5"},{default:t(()=>[n(r(h(C)),1)]),_:1}),e(P,null,{default:t(()=>a[6]||(a[6]=[n("加入揪排咖 ",-1)])),_:1,__:[6]})]),_:1})])]),s("div",null,[s("h1",Te,r(i.value.quote),1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1,__:[7]}),e(m,{cols:"11",md:"5"},{default:t(()=>[a[8]||(a[8]=s("h1",{class:"card-title mt-1 mb-2 ml-7 ml-md-0"},"排球行事曆 Events Calender",-1)),e(d,{class:"pa-4 card-memberPage mr-md-7 ml-7 ml-md-0",height:"368",style:{"overflow-y":"scroll"}},{default:t(()=>[e(T,{class:"fill-height"},{default:t(()=>[e(m,null,{default:t(()=>[e(ce,{height:"350"},{default:t(()=>[e(u,{ref_key:"calendar",ref:W,modelValue:B.value,"onUpdate:modelValue":a[0]||(a[0]=l=>B.value=l),events:M.value,color:"#353D42",type:"month"},null,8,["modelValue","events"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1,__:[8]}),e(m,{cols:"12",md:"4"},{default:t(()=>[a[10]||(a[10]=s("div",{class:"card-title mb-2 ml-7"},"出席統計 Presence Rate",-1)),e(d,{class:"card-memberPage mr-10 mr-md-7 ml-7 mb-7",height:"225"},{default:t(()=>[e(v,{items:Q.value,legend:{position:o.$vuetify.display.mdAndUp?"right":"bottom"},tooltip:{subtitleFormat:"[value]%"},class:"justify-center mt-5","inner-cut":"70","item-key":"id",rounded:"2",size:"180",animation:"","hide-slice":"",reveal:""},{center:t(()=>a[9]||(a[9]=[s("div",{class:"text-center"},[s("div",{class:"card-title text-h5"},"出席率"),s("div",{class:"opacity-70 text-h4 mt-1 mb-n1"},"90%")],-1)])),legend:t(({items:l,toggle:c,isActive:x})=>[e(we,{class:"py-0 mb-n5 mb-md-0 bg-transparent",density:"compact",width:"150"},{default:t(()=>[(b(!0),H($,null,q(l,_=>(b(),V(fe,{key:_.key,class:ve(["my-1",{"opacity-40":!x(_)}]),title:_.title,rounded:"xl",link:""},{prepend:t(()=>[e(R,{color:_.color,size:16},null,8,["color"])]),append:t(()=>[s("div",Ce,r(_.value)+"%",1)]),_:2},1032,["class","title"]))),128))]),_:2},1024)]),_:1},8,["items","legend"])]),_:1})]),_:1,__:[10]}),e(m,{cols:"11",md:"8",class:"ml-md-n7 ml-7 mr-7 mb-8 mb-md-0"},{default:t(()=>[s("div",ze,[a[12]||(a[12]=s("h1",{class:"card-title mb-2"},"收藏的球場 Favorite Courts",-1)),e(I,{text:"編輯收藏",location:"bottom"},{activator:t(({props:l})=>[e(k,S({class:"mr-md-2 mr-1 mt-1 btn-hover",variant:"outlined",rounded:"0",to:"/member/favorites",size:"35"},l),{default:t(()=>[e(D,null,{default:t(()=>a[11]||(a[11]=[n("mdi-pencil",-1)])),_:1,__:[11]})]),_:2},1040)]),_:1})]),!w.value||w.value.length===0?(b(),V(d,{key:0,height:"225",class:"card-memberPage"},{default:t(()=>[e(y,{style:{"font-size":"1.5rem","line-height":"200px"},class:"text-center"},{default:t(()=>[a[14]||(a[14]=n(" 你還沒有收藏任何球場喔~快到 ",-1)),e(p,{to:"/venueList"},{default:t(()=>a[13]||(a[13]=[s("span",{style:{"text-decoration":"underline"}},"球場列表",-1)])),_:1,__:[13]}),a[15]||(a[15]=n(" 搜尋喜歡的球場吧！ ",-1))]),_:1,__:[14,15]})]),_:1})):pe("",!0),e(h(ae),{slidesPerView:"4",navigation:!0,modules:G,"space-between":220,class:"mySwiper"},{default:t(()=>[(b(!0),H($,null,q(w.value,(l,c)=>(b(),V(h(le),{key:c},{default:t(()=>[e(d,{class:"card-memberPage card-favoriteVenues",width:"300",height:"220",to:`/venueSingle/${l._id}`},{default:t(()=>[e(E,{src:l.imageUrl,class:"fill-height img-favoriteVenues",cover:""},null,8,["src"]),s("h2",Ie,r(l.name),1)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},Ge=oe(Se,[["__scopeId","data-v-1d6f9288"]]);export{Ge as default};
