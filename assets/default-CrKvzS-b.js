import{_ as F,i as P,u as j,a as q,r as L,c as V,b as E,o as H,w as R,d as n,e,V as $,f as A,g as C,h as s,j as t,k as g,l as i,F as _,m as v,n as c,p as B,q as y,s as G,t as S,v as N,x as u,y as k,z as U,A as J,B as K,C as O}from"./index-CUEbiXdB.js";import{_ as D,V as Q,a as W}from"./logo-light-xxQy0pZS.js";import{V as X,a as Y}from"./VAppBarTitle-tOZvMGEd.js";import{V as Z}from"./VList-DnTRCDDI.js";import{V as ee}from"./VContainer-B9m4GMyA.js";const te={__name:"default",setup(oe){const h=P(),l=j(),z=q(),p=L(!1),m=L(""),w=E(),d=V(()=>w.path==="/"),b=V(()=>[{title:"關於我們",to:"/aboutUs",icon:"mdi-compass",show:!0},{title:"球場列表",to:"/venueList",icon:"mdi-map-marker",show:!0},{title:"我要打球",to:"/socials",icon:"mdi-volleyball",show:!0},{title:"排球商城",to:"/shop",icon:"mdi-cart",show:!0},{title:"註冊/登入",to:"/logInSingUp",icon:"mdi-login",show:!l.isLoggedIn}]),M=V(()=>b.value.filter(r=>r.show).slice(0,4)),I=async()=>{if(l.isLoggedIn)try{const{data:r}=await A.profile();m.value=r.user.avatar,console.log("userAvatar",m)}catch{h({text:"取得大頭貼失敗，請重新整理或稍後再試。",snackbarProps:{color:"red"}})}},x=async()=>{try{await A.logout()}catch(r){console.error(r)}l.logout(),w.push("/"),h({text:"登出成功！",snackbarProps:{color:"green"}})};return H(()=>{I()}),R(()=>l.isLoggedIn,(r,a)=>{r===!0&&a===!1&&I()}),(r,a)=>{const f=C("router-link"),T=C("router-view");return s(),n($,null,{default:e(()=>[t(X,{style:{position:"fixed"},color:d.value?"transparent":"#353d42",elevation:d.value?0:10,absolute:d.value,app:!d.value,height:"80"},{default:e(()=>[i(z).smAndDown.value?(s(),g(_,{key:0},[t(Y,null,{default:e(()=>[t(f,{to:"/"},{default:e(()=>[t(v,{width:"200",height:"200",src:D,id:"logo"})]),_:1})]),_:1}),t(f,{to:"/member"},{default:e(()=>[i(l).isLoggedIn?(s(),n(B,{key:0,style:{border:"3px solid #fdd000"},class:"mr-2"},{default:e(()=>[t(v,{src:m.value},null,8,["src"])]),_:1})):c("",!0)]),_:1}),t(y,{icon:"mdi-menu",onClick:a[0]||(a[0]=G(o=>p.value=!p.value,["stop"])),color:"#f1f1f1"})],64)):(s(),g(_,{key:1},[t(f,{to:"/"},{default:e(()=>[t(v,{width:"220",height:"220",src:D,id:"logo",class:"ml-5"})]),_:1}),t(S),(s(!0),g(_,null,N(M.value,o=>(s(),n(y,{key:o.title,class:"btn-appbar",to:o.to},{default:e(()=>[u(k(o.title),1)]),_:2},1032,["to"]))),128)),t(S),i(l).isLoggedIn?c("",!0):(s(),n(y,{key:0,class:"mr-md-8 btn",to:"/logInSingUp",style:{color:"black"},height:"45"},{default:e(()=>a[2]||(a[2]=[u("註冊/登入",-1)])),_:1,__:[2]})),t(f,{to:"/member"},{default:e(()=>[i(l).isLoggedIn?(s(),n(B,{key:0,style:{border:"3px solid #fdd000"},size:"large",class:"mr-2 mr-md-3"},{default:e(()=>[t(v,{src:m.value},null,8,["src"])]),_:1})):c("",!0)]),_:1}),i(l).isLoggedIn?(s(),n(y,{key:1,class:"btn-appbar mr-5",onClick:x},{default:e(()=>a[3]||(a[3]=[u("登出",-1)])),_:1,__:[3]})):c("",!0)],64))]),_:1},8,["color","elevation","absolute","app"]),t(Q,{style:{position:"fixed",height:"240px"},modelValue:p.value,"onUpdate:modelValue":a[1]||(a[1]=o=>p.value=o),temporary:"",location:"right",width:"180",color:"#f1f1f1",rounded:"sm"},{default:e(()=>[t(Z,{density:"compact",nav:""},{default:e(()=>[(s(!0),g(_,null,N(b.value.filter(o=>o.show),o=>(s(),n(U,{key:o.to,value:o.to,to:o.to},{prepend:e(()=>[t(K,null,{default:e(()=>[u(k(o.icon),1)]),_:2},1024)]),default:e(()=>[t(J,{class:"menu-item"},{default:e(()=>[u(k(o.title),1)]),_:2},1024)]),_:2},1032,["value","to"]))),128)),i(l).isLoggedIn?(s(),n(U,{key:0,"prepend-icon":"mdi-logout",class:"menu-item",onClick:x},{default:e(()=>a[4]||(a[4]=[u("登出",-1)])),_:1,__:[4]})):c("",!0)]),_:1})]),_:1},8,["modelValue"]),t(W,null,{default:e(()=>[t(ee,{class:O(["pa-0",d.value?"container":""]),fluid:""},{default:e(()=>[t(T)]),_:1},8,["class"])]),_:1})]),_:1})}}},ie=F(te,[["__scopeId","data-v-3c3b2e6e"]]);export{ie as default};
