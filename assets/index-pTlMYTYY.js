import{_ as te}from"./ryujji-Dg__2X3a.js";import{S as ae,a as le}from"./navigation-DN2Y82LO.js";import{N as se}from"./navigation-Bf_bOUhZ.js";import{_ as oe,a as ne,r as u,O as re,a2 as ie,$ as de,az as me,e as L,d as P,o as h,w as t,f as e,aq as f,aA as T,k as y,a6 as C,y as w,q as r,au as ce,aB as R,H as l,j as E,t as i,as as x,h as b,at as V,aC as ue,g as H,F as $,p as q,v as fe,z as ve,A as pe}from"./index-C2Ki1pi2.js";import{v as _e}from"./venueService-C_eS9flX.js";import{s as ge}from"./socialService-Ds1AHp6E.js";import{s as be}from"./socialParticipantService-DOQA_QUx.js";import{d as I}from"./dayjs.min-CFWPjdno.js";import{r as he}from"./zh-tw-vtWARsfI.js";import{V as D,a as m}from"./VRow-Dk5fHTbR.js";import{V as ye}from"./VList-BdzMwNZM.js";import{V as we}from"./VContainer-Du8D55aO.js";import"./_commonjsHelpers-gnU0ypJ3.js";const xe=""+new URL("passing-DswJmcCd.png",import.meta.url).href,Ve={class:"d-flex justify-space-between"},De={class:"font-weight-bold mt-n1 mb-1",style:{"font-size":"2rem"}},ke={class:"d-flex justify-space-between mt-5"},Pe={class:"font-weight-bold mt-6",style:{"font-size":"1.3rem"}},Te={class:"font-weight-bold"},Ce={class:"d-flex justify-space-between"},Ie={class:"venueName"},Se={__name:"index",setup(ze){I.extend(he),I.locale("zh-tw");const G=[se];ne();let k=u(""),S=u(0),z=u(0);const A=u([]),J=u("@/assets/images/gabi hitting.jpg.jpg"),K=re("Transactions"),Q=ie(()=>K.value==="Transactions"?[{id:1,title:"出席",value:90,color:"#ffd000"},{id:2,title:"缺席",value:10,color:"#f1f1f1",pattern:"url(#pattern-0)"}]:[{id:1,title:"出席",value:90,color:"#353D42"},{id:2,title:"缺席",value:10,color:"#f1f1f1"}]),W=u(),j=u([new Date]),N=u([]),B=["blue","indigo","deep-purple","cyan","green","orange","grey darken-1"],M=["Meeting","Holiday","PTO","Travel","Event","Birthday","Conference","Party"],d=u({});function X({start:o,end:a}){const c=[],v=o,s=a,n=(s.getTime()-v.getTime())/864e5,p=g(n,n+20);for(let _=0;_<p;_++){const F=g(0,3)===0,O=g(v.getTime(),s.getTime()),U=new Date(O-O%9e5),Z=g(2,F?288:8)*9e5,ee=new Date(U.getTime()+Z);c.push({title:M[g(0,M.length-1)],start:U,end:ee,color:B[g(0,B.length-1)],allDay:!F})}N.value=c}function g(o,a){return Math.floor((a-o+1)*Math.random())+o}const Y=async()=>{try{const{data:o}=await pe.profile();if(!o||!o.user){console.log("API 回傳資料格式不正確或無使用者資料",o);return}d.value=o.user,k.value=I(d.value.createdAt).fromNow();const{data:a}=await ge.getAll();if(a&&a.socials){const s=a.socials.filter(n=>{var p;return((p=n.host)==null?void 0:p._id)===d.value._id});S.value=s.length}else console.log("API 回傳活動資料格式不正確",a);const{data:c}=await be.getMyParticipations();c&&c.myParticipations?z.value=c.myParticipations.length:console.log("API 回傳參與活動資料格式不正確",c);const{data:v}=await _e.getAvailable();if(v&&v.venues&&d.value.favoriteVenues){const s=new Set(d.value.favoriteVenues);A.value=v.venues.filter(n=>s.has(n._id)).map(n=>{const p=n.images&&n.images.length>0?n.images[0]:J.value;return{...n,imageUrl:p}})}}catch(o){console.error("使用者資料取得失敗:",o)}};return de(()=>{Y();const o=me();X({start:o.startOfDay(o.startOfMonth(new Date)),end:o.endOfDay(o.endOfMonth(new Date))})}),(o,a)=>{const c=L("v-calendar"),v=L("v-pie");return h(),P(we,{class:"bg-dark"},{default:t(()=>[e(f,{class:"bg-light pt-10 mt-1 pb-5",style:{border:"2px solid black"}},{default:t(()=>[e(D,null,{default:t(()=>[e(m,{cols:"4",md:"6"},{default:t(()=>[e(T,{text:"回首頁",location:"bottom"},{activator:t(({props:s})=>[e(y,C({variant:"outlined",class:"ml-7 btn-hover",rounded:"0",to:"/",size:"40"},s),{default:t(()=>[e(w,null,{default:t(()=>a[1]||(a[1]=[r("mdi-home",-1)])),_:1,__:[1]})]),_:2},1040)]),_:1})]),_:1}),e(m,{cols:"8",md:"6",class:"d-flex"},{default:t(()=>[e(ce,{"prepend-inner-icon":"mdi-magnify",density:"compact",placeholder:"請輸入關鍵字","hide-details":"",style:{"background-color":"#f1f1f1",border:"2px solid black"},class:"mr-md-10 mr-3"}),e(y,{class:"mr-md-2 mr-1 btn-hover",variant:"outlined",rounded:"0",to:"/",size:"40"},{default:t(()=>[e(w,null,{default:t(()=>a[2]||(a[2]=[r("mdi-bell",-1)])),_:1,__:[2]})]),_:1}),e(R,{rounded:"0",image:xe,style:{border:"2px solid black"},class:"mr-7 btn-hover"})]),_:1})]),_:1}),e(D,null,{default:t(()=>[e(m,{cols:"11",md:"7"},{default:t(()=>[a[7]||(a[7]=l("h1",{class:"card-title mb-3 ml-7"},"球員檔案 Player Information",-1)),e(f,{class:"pa-5 card-memberPage mb-5 ml-7",color:"#fdd000"},{default:t(()=>[e(D,null,{default:t(()=>[e(m,{cols:"4"},{default:t(()=>[e(E,{style:{border:"2px solid black"},src:te,height:"320",width:"250",class:"mt-1",cover:""})]),_:1}),e(m,{cols:"8",class:"ml-n5"},{default:t(()=>[e(m,{cols:"12"},{default:t(()=>[l("div",Ve,[l("h1",De,i(d.value.name),1),e(T,{text:"編輯球員檔案",location:"bottom"},{activator:t(({props:s})=>[e(y,C(s,{to:"/member/profile",rounded:"0",size:"35",variant:"outlined",class:"btn-hover mt-1"}),{default:t(()=>[e(w,{icon:"mdi-pencil"})]),_:2},1040)]),_:1})]),l("h3",null,i(d.value.gender)+"．"+i(d.value.skillLevel)+"．",1),l("h3",null,i(d.value.email),1),l("div",ke,[l("div",null,[e(f,{class:"card-border mr-n4 text-center",width:"130",rounded:"0"},{default:t(()=>[e(x,{class:"font-weight-bold text-h5"},{default:t(()=>[r(i(b(z)),1)]),_:1}),e(V,null,{default:t(()=>a[3]||(a[3]=[r("打過的 play ",-1)])),_:1,__:[3]})]),_:1})]),l("div",null,[e(f,{class:"card-border mr-n4 text-center",width:"130",rounded:"0"},{default:t(()=>[e(x,{class:"font-weight-bold text-h5"},{default:t(()=>[r(i(b(S)),1)]),_:1}),e(V,null,{default:t(()=>a[4]||(a[4]=[r("揪過的 play ",-1)])),_:1,__:[4]})]),_:1})]),l("div",null,[e(f,{class:"card-border mr-n4 text-center",width:"130",rounded:"0"},{default:t(()=>[e(x,{class:"font-weight-bold text-h5"},{default:t(()=>[r(i(b(k)),1)]),_:1}),e(V,null,{default:t(()=>a[5]||(a[5]=[r("加入揪排咖 ",-1)])),_:1,__:[5]})]),_:1})]),l("div",null,[e(f,{class:"card-border text-center",width:"130",rounded:"0"},{default:t(()=>[e(x,{class:"font-weight-bold text-h5"},{default:t(()=>[r(i(b(k)),1)]),_:1}),e(V,null,{default:t(()=>a[6]||(a[6]=[r("加入揪排咖 ",-1)])),_:1,__:[6]})]),_:1})])]),l("div",null,[l("h1",Pe,i(d.value.quote),1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1,__:[7]}),e(m,{cols:"11",md:"5"},{default:t(()=>[a[8]||(a[8]=l("h1",{class:"card-title mt-1 mb-2 ml-7 ml-md-0"},"排球行事曆 Events Calender",-1)),e(f,{class:"pa-4 card-memberPage mr-md-7 ml-7 ml-md-0",height:"368",style:{"overflow-y":"scroll"}},{default:t(()=>[e(D,{class:"fill-height"},{default:t(()=>[e(m,null,{default:t(()=>[e(ue,{height:"350"},{default:t(()=>[e(c,{ref_key:"calendar",ref:W,modelValue:j.value,"onUpdate:modelValue":a[0]||(a[0]=s=>j.value=s),events:N.value,color:"#353D42",type:"month"},null,8,["modelValue","events"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1,__:[8]}),e(m,{cols:"12",md:"4"},{default:t(()=>[a[10]||(a[10]=l("div",{class:"card-title mb-2 ml-7"},"出席統計 Presence Rate",-1)),e(f,{class:"card-memberPage mr-10 mr-md-7 ml-7 mb-7",height:"225"},{default:t(()=>[e(v,{items:Q.value,legend:{position:o.$vuetify.display.mdAndUp?"right":"bottom"},tooltip:{subtitleFormat:"[value]%"},class:"justify-center mt-5","inner-cut":"70","item-key":"id",rounded:"2",size:"180",animation:"","hide-slice":"",reveal:""},{center:t(()=>a[9]||(a[9]=[l("div",{class:"text-center"},[l("div",{class:"card-title text-h5"},"出席率"),l("div",{class:"opacity-70 text-h4 mt-1 mb-n1"},"90%")],-1)])),legend:t(({items:s,toggle:n,isActive:p})=>[e(ye,{class:"py-0 mb-n5 mb-md-0 bg-transparent",density:"compact",width:"150"},{default:t(()=>[(h(!0),H($,null,q(s,_=>(h(),P(fe,{key:_.key,class:ve(["my-1",{"opacity-40":!p(_)}]),title:_.title,rounded:"xl",link:""},{prepend:t(()=>[e(R,{color:_.color,size:16},null,8,["color"])]),append:t(()=>[l("div",Te,i(_.value)+"%",1)]),_:2},1032,["class","title"]))),128))]),_:2},1024)]),_:1},8,["items","legend"])]),_:1})]),_:1,__:[10]}),e(m,{cols:"11",md:"8",class:"ml-md-n7 ml-7 mr-7 mb-8 mb-md-0"},{default:t(()=>[l("div",Ce,[a[12]||(a[12]=l("h1",{class:"card-title mb-2"},"收藏的球場 Favorite Courts",-1)),e(T,{text:"編輯收藏",location:"bottom"},{activator:t(({props:s})=>[e(y,C({class:"mr-md-2 mr-1 mt-1 btn-hover",variant:"outlined",rounded:"0",to:"/member/favorites",size:"35"},s),{default:t(()=>[e(w,null,{default:t(()=>a[11]||(a[11]=[r("mdi-pencil",-1)])),_:1,__:[11]})]),_:2},1040)]),_:1})]),e(b(ae),{slidesPerView:"4",navigation:!0,modules:G,"space-between":220,class:"mySwiper"},{default:t(()=>[(h(!0),H($,null,q(A.value,(s,n)=>(h(),P(b(le),{key:n},{default:t(()=>[e(f,{class:"card-memberPage card-favoriteVenues",width:"300",height:"220",to:`/venueSingle/${s._id}`},{default:t(()=>[e(E,{src:s.imageUrl,class:"fill-height img-favoriteVenues",cover:""},null,8,["src"]),l("h2",Ie,i(s.name),1)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},qe=oe(Se,[["__scopeId","data-v-d6a87b00"]]);export{qe as default};
